---
# Minimum version for HA etcd is v1.19.5+k3s1
k3s_version: v1.22.3+k3s1
ansible_user: debian
systemd_dir: /etc/systemd/system

# If you define multiple servers, you should provide a load-balanced IP that points to
# all control-plane servers (apiserver_endpoint).  The default value below uses the IP
# of the first server in the group and is single-point of failure in a HA setup.
#
# Note that after an agent initially contacts a control-plane server, it monitors all
# control-plane servers (see /var/lib/rancher/k3s/agent/etc/k3s-agent-load-balancer.json).
# The initial server it contacts is "ServerURL" in the json file which should be set to
# the value of apiserver_endpoint.
#
# The apiserver_endpoint is also needed for transparent external access where the value
# is used in ~/.kube/config, etc..
#
apiserver_endpoint: "{{ hostvars[groups['server'][0]]['ansible_host'] | default(groups['server'][0]) }}"

# This token is used to secure communication between nodes.
#
k3s_token: "MySuperSecureServerToken"

extra_server_args: ""
extra_agent_args: ""
